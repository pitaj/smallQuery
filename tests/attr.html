<div id="three">
  <span>zero</span>
  <span>one</span>
  <span>two</span>
  <span>three</span>
  <span>four</span>
</div>

<div id="four">
  <span>zero</span>
  <span>one</span>
  <span>two</span>
  <span>three</span>
  <span>four</span>
</div>

<script>
function runTest(){
  var S = SmallQuery.SQ;
  var J = jQuery;

  QU.test("#attr", function(assert){
    S("#three span").attr("derka", "foobar");
    J("#four span").attr("derka", "foobar");

    assert.equal( document.querySelector("#three span").getAttribute("derka"),
      document.querySelector("#four span").getAttribute("derka") );

    assert.equal( S("#three").attr("derka"), J("#four").attr("derka") );

    assert.equal( S("#three span").attr("derka"), J("#three span").attr("derka") );

    S("#three span").attr("derka", function(index, value){
      return value + index;
    });

    J("#four span").attr("derka", function(index, value){
      return value + index;
    });

    assert.equal( document.querySelector("#three span").getAttribute("derka"),
      document.querySelector("#four span").getAttribute("derka") );
  });
}
</script>
